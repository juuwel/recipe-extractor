# Shared configuration
doppler:
  namespace: doppler-operator-system
  project: recipe-parser
  config: prod

imagePullSecret: github-secret

tls:
  certResolver: le

ingressRoute:
  entryPoints:
    - websecure
  host: recipe.buchtik.top

# Extraction Service (Python)
extractionService:
  enabled: true
  replicaCount: 1

  image:
    repository: ghcr.io/juuwel/extraction-service
    tag: latest
    pullPolicy: IfNotPresent

  service:
    annotations: {}
    type: ClusterIP
    port: 80
    targetPort: 8000

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

# Recipe Service (.NET)
recipeService:
  enabled: true
  replicaCount: 1

  image:
    repository: ghcr.io/juuwel/recipe-service
    tag: latest
    pullPolicy: IfNotPresent

  service:
    annotations: {}
    type: ClusterIP
    port: 80
    targetPort: 8080

  # Public routes exposed via ingress
  routes:
    - path: /api/v1/recipe
      middlewares:
        - basic-auth
    - path: /api/v1/recipe/webhook
      priority: 100
      # No basic-auth middleware for webhook

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
